Pull using https:
git init
git config --global user.name "Boaterfly-CC"
git config --global user.email "boaterfly@coders-corner.fr"
git pull https://github.com/CodersCorner/Boaterfly.git master
It will ask username and pwd, enter it

kill -9 $(lsof -i tcp:3000 -t)


48 Boulevard Jourdan, 75014 Paris

Username : Boaterfly-CC
Password : 3c6VF3MN

sudo /etc/init.d/elasticsearch start

git push https://github.com/CodersCorner/Boaterfly.git feature/task906


https://github.com/CodersCorner/Boaterfly.git



git clone https://github.com/CodersCorner/Boaterfly.git

git config --global user.name "Boaterfly-CC"
git config --global user.email "boaterfly@coders-corner.fr"


It will ask username and pwd, enter it
git push https://github.com/CodersCorner/Boaterfly.git task906


https://github.com/CodersCorner/Boaterfly.git

git clone https://github.com/Boaterfly-CC/Boaterfly.git task_906


5b911e4d5f0284be7b926b6c19c59519c4b7d07c
5c483c5ab71fd11f4dd970147ecd1c8bdaef65d7
Configration Steps

	1)  git clone https://github.com/Boaterfly-CC/Boaterfly.git task_1008
    2)  git status
    3)  cd task_906/
    4)  git status
    5)  git branch -r
    6)  git checkout origin/staging
    7)  git status
    8)  git checkout -b task1007
	    9)  git push origin task1007

	10) Files to be added and commited to branch

		git add app/classes/calculator.rb
		git commit -m "Remove towel_laundry_fee and bed_laundry_fee from additional_fees method"

		git add app/models/booking.rb
		git add app/models/extra_feature.rb
		git add app/models/view_models/boat/extras.rb
		git add app/models/view_models/booking_summary.rb
		git add app/models/view_models/search_result.rb
		git commit -m "bed_laundry_fee and towel_laundry_fee are removed in attr_accessible,delegate and validates"

		git add app/views/account/boats/steps/_deposit.html.slim
		git add app/views/boats/_tabs.html.slim
		git add app/views/bookings/new.html.slim
		git add app/views/notifier/host_booking_confirmed.html.slim
		git add app/views/notifier/renter_booking_confirmed.html.slim
		git commit -m "Remove towel_laundry_fee and bed_laundry_fee from view file"

		git add db/migrate/20150601140244_remove_laundry_bed_towel_records_from_feature.rb
		git add db/migrate/20150602113050_remove_column_bed_and_towel_landry_fee_from_extra_feature.rb
		git commit -m "Remove towel_laundry,bed_landry record from features table in up method,insert in down method and remove towel_laundry_fee,bed_laundry_fee column from extra_features table"

	11) git push origin task906


	dest = User.find(1)

	boatId = Boat.first.id

	receipt = User.last.send_message(dest, 'Hi how are you', '1')

	Notifier.notify_boaterfly_new_conversation_started(receipt.conversation).deliver


	  conversation = User.last.mailbox.conversations.last

	  dest = conversation.participants.first

	  User.first.reply_to_conversation(conversation, 'Hi Bala')

      Notifier.new_answer_to_conversation(Conversation.find(conversation.id), User.first).deliver






      git add app/controllers/application_controller.rb

      git commit -m "create before filter method for token checking in email link url"

      git add app/mailers/notifier.rb

      git commit -m "Add token for for each link with corresponding user"

      git add app/models/user.rb

      git commit -m "Add new_token! and remove_token! method for create and remove migration"

      git add db/migrate/20150604051848_add_token_to_user.rb
      git add db/migrate/20150604104539_addtokenvalueuser.rb

      git commit -m "Add token column in user model and generate token value in up method and drop column in down method"

      http://localhost:3000/fr/mon-compte/messages/1?token=a00caa85da3d7f2ec2290e81da43a175

      git commit -m "Add update_token method used to create token for new user in after_save filter"

      user=User.last
      token=nil
      user_id=1
      user.update_token(user_id, token)

      def update_token
    user_token = loop do
      random_token = SecureRandom.urlsafe_base64(nil, false)
      break user_token = random_token unless User.exists?(token: random_token)
    end
    update_column(:token, user_token)
  user_token
  end

  user=User.first
  conversation=user.mailbox.conversations.not_trash(user).find(1)
  Notifier.notify_boaterfly_report_conversation(conversation, user, "Hi Bala How Are You").deliver

  git add app/models/user.rb
  git commit -m "Update_token method is add for genrating token"

  git add app/mailers/notifier.rb
  git commit -m "gen_token method is used to check token is nil then call user update_token"


  p=Payment.first
  host = p.booking.boat.user
  Notifier.host_booking_requested(p).deliver

  git add app/controllers/application_controller.rb
  git commit -m "email_login_from_token method is removed and use existing authenticate_user_from_token method"

  git rm db/migrate/20150604051848_add_token_to_user.rb
  git commit -m "Token column removed from user Table"

  git add app/models/user.rb
  git commit -m "update_token is removed and use generate_authentication_token for Autologin functionality"

  git add app/mailers/notifier.rb
  git commit -m "gen_token method is removed and call User generate_authentication_token method"


	dest = User.first
	boatId = Boat.first.id
	receipt = User.last.send_message(dest, 'Hi how are you', '1')
	Notifier.notify_boaterfly_new_conversation_started(receipt.conversation).deliver

	user=User.first
	conversation=user.mailbox.conversations.not_trash(user).find(1)
	Notifier.notify_boaterfly_report_conversation(conversation, user, "Hi Bala How Are You").deliver

	conversation = User.last.mailbox.conversations.last
	dest = conversation.participants.first
	User.first.reply_to_conversation(conversation, 'Hi Bala')
	Notifier.new_answer_to_conversation(Conversation.find(conversation.id), User.first).deliver

	p=Payment.first
	host = p.booking.boat.user
	Notifier.host_booking_requested(p).deliver

	current_user = User.first
	conversation = current_user.mailbox.conversations
	flash[:notice] = t('controllers.account.messages.your_message_has_been_sent_to_admin')
	Notifier.notify_boaterfly_report_conversation(conversation, current_user, 'Hi How are you').deliver


	booking = Booking.first
	payment = booking.payments.first
	user = payment.user
	Notifier.renter_booking_expired(payment).deliver
	Notifier.host_booking_expired(payment).deliver

	booking = Booking.last
	Notifier.boat_review_notification(booking).deliver
	Notifier.boat_review_notification_reminder(booking).deliver




	payment=Payment.first
	Notifier.renter_payment_captured(payment).deliver



	payment=Payment.first
	Notifier.host_booking_requested(payment).deliver



	payment=Payment.first
	Notifier.renter_booking_requested(payment).deliver


	payment=Payment.first
	Notifier.renter_booking_confirmed(payment).deliver


	payment=Payment.first
	Notifier.host_booking_confirmed(payment).deliver

	payment=Payment.first
	Notifier.renter_booking_refused(payment).deliver

	payment=Payment.first
	Notifier.host_booking_refused(payment).deliver

	payment=Payment.first
	Notifier.renter_booking_expired(payment).deliver

	payment=Payment.first
	Notifier.host_booking_expired(payment).deliver

	boat=Boat.first
	Notifier.notify_owner_no_date_available(boat).deliver

	Notifier.notify_boaterfly_new_booking.deliver

	user=User.first
	Notifier.notify_boaterfly_invalid_phone_number(user).deliver

	booking=Booking.first
	Notifier.boat_review_notification(booking).deliver


	booking=Booking.first
	Notifier.boat_review_notification_reminder(booking).deliver


	booking=Booking.first
	Notifier.renter_review_notification(booking).deliver


	booking=Booking.first
	Notifier.renter_review_notification_reminder(booking).deliver




	renter_booking_refused
	host_booking_requested bcc
	renter_booking_requested bcc
	renter_booking_confirmed
	host_booking_confirmed
	host_booking_refused
	renter_booking_expired
	host_booking_expired
	notify_owner_no_date_available


	git add app/mailers/notifier.rb
	git add app/views/notifier/boat_review_notification.html.haml
	git add app/views/notifier/boat_review_notification_reminder.html.haml
	git add app/views/notifier/renter_booking_requested.html.slim
	git add app/views/notifier/renter_review_notification.html.haml
	git add app/views/notifier/renter_review_notification_reminder.html.haml

	git commit -m "Added authentication token for all email link"


	payment=Payment.first
	Notifier.renter_payment_captured(payment).deliver

	payment=Payment.first
	Notifier.host_booking_requested(payment).deliver

	payment=Payment.first
	Notifier.renter_booking_requested(payment).deliver

	payment=Payment.first
	Notifier.renter_booking_confirmed(payment).deliver

	payment=Payment.first
	Notifier.host_booking_confirmed(payment).deliver

	payment=Payment.first
	Notifier.renter_booking_refused(payment).deliver

	payment=Payment.first
	Notifier.host_booking_refused(payment).deliver

	payment=Payment.first
	Notifier.renter_booking_expired(payment).deliver

	payment=Payment.first
	Notifier.host_booking_expired(payment).deliver

	boat=Boat.first
	Notifier.notify_owner_no_date_available(boat).deliver

	Notifier.notify_boaterfly_new_booking.deliver

	user=User.first
	Notifier.notify_boaterfly_invalid_phone_number(user).deliver               Doubt


	booking=Booking.first
	Notifier.boat_review_notification(booking).deliver


	booking=Booking.first
	Notifier.boat_review_notification_reminder(booking).deliver


   rails g model BoatRentalType boat_id:integer rental_type_id:integer


   rails g migration DiscussedServiceMigratedToBareboatService

   git add app/models/boat.rb
   git add app/models/rental_type.rb
   git commit -m "Added Association for boat_rental_types"

   git add app/models/view_models/boat/description.rb
   git commit -m "rental_type_ids delegate added to boat and removed from boat_record"

   git add app/views/account/boats/steps/_description.html.slim
   git commit -m "Type of service changed from Radio button to checkbox"

   git add app/models/boat_rental_type.rb
   git add db/migrate/20150619095308_create_boat_rental_types.rb
   git commit -m "BoatRentalType created for type of service"

   git add db/migrate/20150619095413_discussed_service_migrated_to_bareboat_service.rb
   git commit -m "To be Discussed service migrated to bareboat service"

   git add db/migrate/20150619095537_discussed_service_removed_from_rental_type.rb
   git commit -m "Discussed Service is removed from rental_type table"

   git add app/models/boat_rental_type.rb
   git add app/models/rental_type.rb
   git commit -m "inverse_of was removed"

   git add app/models/view_models/search_result.rb
   git commit -m "View page Type of Service is changed"






    Inverse of function is deleted in both Use_type and BoatUseType







    RentalType.create name: 'boat_and_breakfast', position: 27, group: 'renting', boat_types_support: '{sailboat, powerboat}'

    Boat.all.each do |boat|
      if boatusetype = boat.use_types.find_by_name('boat_and_breakfast')
        rentaltype_id = RentalType.where(name: 'boat_and_breakfast').first.id
        BoatRentalType.create boat_id: boat.id, rental_type_id: rentaltype_id
        boatusetype.boat_use_types.destroy_all
      end
    end

    UseType.find_by_name('boat_and_breakfast').destroy


    UseType.create name: 'boat_and_breakfast', order_number: 2, boat_types_support: '{sailboat, powerboat}'

    BoatRentalType.all.each do |boatrentaltype|
    	rentaltype_id = RentalType.where(name: 'boat_and_breakfast').first.id
    	usetype_id = UseType.where(name: 'boat_and_breakfast').first.id
    	if boatrentaltype.rental_type_id == rentaltype_id
        	boatrentaltype.delete
        	BoatUseType.create boat_id: boatrentaltype.boat_id, use_type_id: usetype_id
      	end
    end

    RentalType.find_by_name('boat_and_breakfast').destroy










    Boat.all.each do |boat|
      if boatusetype = boat.use_types.find_by_name('boat_and_breakfast')
        rentaltype_id = RentalType.where(name: 'boat_and_breakfast').first.id
        BoatRentalType.create boat_id: boat.id, rental_type_id: rentaltype_id
        boatusetype.boat_use_types.destroy_all
      end
    end

    BoatRentalType.all.each do |boatrentaltype|
    	rentaltype_id = RentalType.where(name: 'boat_and_breakfast').first.id
    	usetype_id = UseType.where(name: 'boat_and_breakfast').first.id
    	if boatrentaltype.rental_type_id == rentaltype_id
        	boatrentaltype.delete
        	BoatUseType.create boat_id: boatrentaltype.boat_id, use_type_id: usetype_id
      	end
    end


    git add app/models/boat_use_type.rb
    git add app/models/use_type.rb
    git commit -m "inverse_of was removed in use_type"

    git add db/migrate/20150623130424_boat_and_breakfast_move_from_activity_to_service.rb
    git commit -m "boat_and_breakfast activity is migrated to services"


    git add app/models/boat_type.rb
    git commit -m "active and position was added to attr_accessible for purpose of rollback"

    git add app/views/account/boats/steps/_calendar.html.slim
    git commit -m "Type of activity changed to Type of service for rate_type(night)"

    git add db/migrate/20150623130424_boat_and_breakfast_move_from_activity_to_service.rb
    git commit -m "Dayride Migration and Search category(Boat and Breakfast was removed)"

		git add app/assets/javascripts/calendar/calendar.coffee
		git commit -m "Modify eventClick method to get user clicked Date"

		git stash save
		git stash pop

		error
		git reset --merge

		rails g migration AddColumnHostrecieveToBooking host_recieve:integer
	  rails g migration AddValueHostrecieveToBooking


		git add app/models/booking.rb
	  git commit -m "update_host_receive method is added to update 'host_recieve' attribute for existing and new booking records"
		git add app/models/view_models/booking_summary.rb
		git commit -m "price_paid, deposit and host_will_receive methods are modified"
		git add db/migrate/20150702105704_add_column_hostreceive_to_booking.rb
		git add db/migrate/20150702110104_add_value_hostrecieve_to_booking.rb
		git commit -m "Files are added to create host receive column and update value to existing records"

		git add app/assets/stylesheets/boat_item.css.scss
		git commit -m "rental_types and licence-box css class are created"

		git add app/models/view_models/search_result.rb
		git add app/views/search/_result.html.slim
		git commit -m "search_rental_type method is added to view multiple services"

		git add phrase/locales/phrase.en.yml
		git commit -m "Boat and Breakfast and tooltip translation is manually added"

		git diff app/assets/stylesheets/boat_item.css.scss
		git diff app/models/view_models/search_result.rb
		git diff app/views/search/_result.html.slim
		git diff phrase/locales/phrase.en.yml

		git add app/assets/javascripts/booking.js.coffee
		git commit -m "blockBookingDate method was added and initDatepicker method was modified"

		git add app/controllers/account/boats_controller.rb
		git add config/routes.rb
		git commit -m "get_booking_dates method was added and routed"


		git add app/assets/javascripts/booking.js.coffee
		git add app/controllers/account/boats_controller.rb
		git add app/controllers/boats_controller.rb
		git add config/routes.rb
		git commit -m "Guest members view calendar issue fixed in Boat Booking calendar"

		git add app/controllers/boats_controller.rb
		git add app/assets/javascripts/booking.js.coffee
		git commit -m "Optimize the DateRange looping in js file"


		git push origin task941

		Username : Boaterfly-CC
		Password : 3c6VF3MN

		git diff app/assets/javascripts/booking.js.coffee
		git diff app/assets/stylesheets/jquery-ui-1.10.3.css.scss
		git diff app/controllers/boats_controller.rb


		git add app/assets/javascripts/booking.js.coffee
		git add app/assets/stylesheets/jquery-ui-1.10.3.css.scss
		git add app/controllers/boats_controller.rb
		git commit -m "Color is added for available dates"

		git add app/assets/javascripts/booking.js.coffee
		git add app/controllers/boats_controller.rb
		git add config/routes.rb
		git commit -m "Existing code is used and old code is removed."


	Notifier.host_booking_confirmed(payment)

		git add app/admin/boats.rb
		git commit -m "Favorites and Concurrent column are removed and title column position was changed"

		git add app/controllers/pages_controller.rb
		git add app/views/notifier/renter_booking_confirmed.html.slim
		git add config/routes.rb
		git add phrase/locales/phrase.fr.yml
		git commit -m "Pdf_url added and translation changed"

		rails g model ActiveAdminComment
		rails g migration ChangeResourceIdColumnToActiveAdminComment
resource_id

	git add app/models/app_conversation.rb
	git add app/admin/conversations.rb
	git commit -m "In My space, dead status message type was removed"

	rails generate migration add_aggrement_number_to_extra_features aggrement_number:integer

	Task 1007
	1) Revert all changes and put ren with allianz

	2) In db migration flexible

	3) Notifier.rent_with_allianz_assurance(payment).deliver

	git add app/admin/boats.rb
	git add app/controllers/bookings_controller.rb
	git add app/mailers/notifier.rb
	git add app/models/extra_feature.rb
	git add app/models/view_models/boat/extras.rb
	git add app/views/account/boats/steps/_deposit.html.slim
	git add app/views/notifier/notify_boaterfly_new_booking.html.haml
	git add app/views/notifier/rent_with_allianz_assurance.html.haml
	git add phrase/locales/phrase.fr.yml
	git commit -m "Email Template updated and agreement number column added to extra feature"



	rails g model Coupon name:string couponcode:string discount:integer discount_type:string couponlimit:integer validity_date:date coupon_usage:string status:string

	rails g migration add_column_to_booking discount:integer coupon_id:integer
